---
import Navbar from "../Navbar.astro";
import Hamburger from "../Hamburger.astro";

// DATA //
const baseItems = [
  { name: "About Us", href: "/admission", active: true },
  { name: "School Tour", href: "/school-tour" },
  { name: "News & Blogs", href: "/news" },
  { name: "Pay Fee", href: "/pay-fee" },
  { name: "Reach Us", href: "/reach-us" },
];

// Normalize a path (removes trailing slash except for "/")
function normalizePath(path: string): string {
  if (path.endsWith("/") && path !== "/") {
    // Remove last slash
    return path.slice(0, -1);
  }
  return path;
}

// Get current path from Astro
const currentPath = normalizePath(Astro.url.pathname);

// Add active to current page path
const navItemWithActive = baseItems.map((item) => {
  const itemPath = normalizePath(item.href);

  // Marks active if path matches
  return {
    ...item,
    active: itemPath === currentPath,
  };
});
---

<!-- Header Component -->
<header class="flex justify-center px-5 py-5 md:py-6 lg:px-0">
  <div
    class="bg-n-50 border-n-200 mx-auto flex w-full justify-between rounded-xl border px-6 py-4 max-lg:container md:w-auto md:gap-36"
  >
    <!-- Brand logo -->
    <a href="/" class="">
      <img src="/images/sai-brand-logo.png" alt="" class="w-22 lg:w-26" />
    </a>

    <div class="flex items-center gap-3.5">
      <!-- Navbar component -->
      <Navbar navItems={navItemWithActive} />

      <!-- Hamburger  -->
      <Hamburger />
    </div>
  </div>
</header>
