---
import Image from "astro/components/Image.astro";
import Navbar from "../ui/Navbar.astro";
import { URLS } from "@/infrastructure/constants/urls";

// DATA //
const baseItems = [
  {name: "Home", href: URLS.HOME, active:true},
  { name: "About Us", href: URLS.ABOUT.ROOT, active: true },
  {
    name: "School Tour",
    target: "_blank",
    href: "https://youtube.com/watch?si=Rdg7vMlOqIGNyqxZ&v=EwX0-sGD_l4&feature=youtu.be",
  },
  { name: "News & Blogs", href: URLS.MEDIA.NEWS.ROOT },
  {
    name: "Pay Fee",
    target: "_blank",
    href: "https://sis.edunexttechnologies.com/Index",
  },
  { name: "Reach Us", href: URLS.CONTACT },
];

// Normalize a path (removes trailing slash except for "/")
function normalizePath(path: string): string {
  if (path.endsWith("/") && path !== "/") {
    // Remove last slash
    return path.slice(0, -1);
  }
  return path;
}

// Get current path from Astro
const currentPath = normalizePath(Astro.url.pathname);

// Add active to current page path
const navItemWithActive = baseItems.map((item) => {
  const itemPath = normalizePath(item.href);

  // Marks active if path matches
  return {
    ...item,
    active: itemPath === currentPath,
  };
});
---

<!-- Header Component -->
<header
  class="bg-n-50 border-n-200 fixed top-6 left-1/2 z-50 mx-auto flex -translate-x-1/2 items-center gap-25 rounded-xl border px-6 py-4 shadow-md md:z-48 xl:gap-36"
>
  <!-- Brand logo -->
  <a href="/" class="w-22 xl:w-26">
    <Image
      src="/images/sai-brand-logo.png"
      alt=""
      class="h-full w-full"
      width={104}
      height={33}
    />
  </a>

  <!-- Navbar component -->
  <Navbar navItems={navItemWithActive} />
</header>
