---
interface Props {
  id: string; // e.g., "step-1"
  step: number; // 1..total
  total: number; // e.g., 3
  title: string;
  hidden?: boolean;
  accent?: string;
  as?: string; // 'article' by default
}

const {
  id,
  step,
  total,
  title,
  hidden = false,
  accent = "#C9443A",
  as = "article",
} = Astro.props;

const percent = Math.round((step / total) * 100);
const Tag = as as any;
---

<Tag
  id={id}
  data-step
  class:list={[
    "border-n-200 bg-n-50 container mx-auto space-y-3 rounded-3xl border p-6 md:space-y-5 md:px-14 md:py-8",
    hidden && "hidden",
  ]}
>
  <div class="flex items-center justify-between">
    <!-- Step label and current section title -->
    <h3 class="text-n-600 text-lg font-semibold md:text-2xl">
      Step {step}/{total}: {title}
    </h3>

    <!-- Percentage text -->
    <span class="text-n-600 text-lg font-semibold md:text-2xl">{percent}%</span>
  </div>

  <!-- Progress bar -->
  <div class="h-2.5 w-full rounded-4xl" style={`background-color:${accent}33;`}>
    <div
      class="h-2.5 rounded-4xl"
      style={`width:${percent}%; background-color:${accent}`}
    >
    </div>
  </div>

  <slot />
</Tag>
