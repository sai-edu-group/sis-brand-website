---
// OTHERS //
import Layout from "../layouts/Layout.astro";
import Awards from "../sections/home/Awards.astro";
import BookATour from "../sections/home/BookATour.astro";
import Founder from "../sections/home/Founder.astro";
import News from "../sections/home/News.astro";
import Testimonial from "../sections/home/Testimonial.astro";
import Partners from "../sections/home/Partners.astro";
import OurCampuses from "../sections/home/OurCampuses.astro";
import Learning360 from "../sections/home/Learning360.astro";
import Ethos from "../sections/home/Ethos.astro";
import Stats from "../sections/home/Stats.astro";
import Results from "../sections/home/Results.astro";
import Placements from "../sections/home/Placements.astro";
import Hero from "../sections/home/Hero.astro";
---

<Layout>
  <Hero />
  <Stats />
  <Learning360 />
  <BookATour />
  <Results />
  <Placements />
  <Awards />
  <OurCampuses />
  <Ethos />
  <Founder />
  <Testimonial />
  <News />
  <Partners />
</Layout>

<script>
  import { animate, stagger } from "motion";

  const containers = Array.from(document.querySelectorAll(".animatedText"));
  const once = new WeakSet();

  const io = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting || once.has(entry.target)) return;
        once.add(entry.target);

        const el = entry.target;
        const children = el.querySelectorAll("span");

        if (children.length > 0) {
          // Animate child spans
          animate(
            children,
            { opacity: [0, 1], y: [20, 0] },
            { duration: 0.6, delay: stagger(0.08), easing: "ease-out" },
          );
        } else {
          // Animate the container itself if it has no spans
          animate(
            el,
            { opacity: [0, 1], y: [20, 0] },
            { duration: 0.6, easing: "ease-out" },
          );
        }
      });
    },
    { threshold: 0.3 },
  );

  containers.forEach((el) => io.observe(el));
</script>
